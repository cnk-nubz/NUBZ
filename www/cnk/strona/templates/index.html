{% extends 'base.html' %}
{% load staticfiles %}
{% load compress %}
{% block content %}
<h1>  </h1>
<script type="text/javascript" src="{% static "js/d3.v3.min.js" %}"></script>
<svg width=600 height=600>
    <svg x="10" y="10" width="50" height="50">
        <g id="pluszoom" class="zoomer">
        <rect x="0" y="0" rx="15" ry="15" height="50" width="50" fill="lightblue" />
        <text class="disable-select" x="50%" y="50%" font-size="32" text-anchor="middle" transform="translate(0, 8)">+</text>
        </g>
    </svg>
    
    <svg x="10" y="75" width="50" height="50">
        <g id="minuszoom" class="zoomer">
        <rect x="0" y="0" rx="15" ry="15" height="50" width="50" fill="lightblue" />
        <text class="disable-select" x="50%" y="50%" font-size="32" text-anchor="middle" transform="translate(0, 8)">-</text>
        </g>
    </svg>
<image width="500" height="500" x="50%" y="50%" xlink:href="{% static "floorplan.jpg" %}" transform="translate(-250, -250)"/>
</svg>
{% compress js %}

<script type="text/coffeescript">
    d3.select("#minuszoom").on("click", 
        () ->
            w = +d3.select("image").attr("width")
            w = w - (if w > 100 then 50 else 0)
            h = +d3.select("image").attr("height")
            h = h - (if h > 100 then 50 else 0)
            d3.select("image").attr("height", h).attr("width", w).attr("transform", "translate(-" +w/2 + ", -" + h/2 +")")
    )
    d3.select("#pluszoom").on("click",
        () ->
            w = +d3.select("image").attr("width")
            w = w + (if w < 500 then 50 else 0)
            h = +d3.select("image").attr("height")
            h = h + (if h < 500 then 50 else 0)
            d3.select("image").attr("height", h).attr("width", w).attr("transform", "translate(-" +w/2 + ", -" + h/2 +")")
    )
</script>
{% endcompress %}
{% endblock %}